import{R as n,r as g}from"./index-RYns6xqu.js";import{c as m}from"./index-Dejnh_W_.js";import{i as c,v as D,g as L,C as f,a as j}from"./Calendar-CuvG70oY.js";import{d as E}from"./index-DhQuXuqW.js";import{v as z}from"./v4-CQkTLCs1.js";import{I as y}from"./Icon-Dor7S2yd.js";import{I as k}from"./InputGroup-DFg7WU2E.js";const N=n.forwardRef(({ariaInvalid:s,value:e,className:t,locale:a="nb",...l},i)=>n.createElement("input",{...l,"aria-invalid":s,maxLength:10,ref:i,"aria-placeholder":c[a].DATE_FORMAT,value:e,className:m("ffe-input-field ffe-dateinput__field",t)}));N.__docgenInfo={description:"",methods:[],displayName:"DateInput",props:{ariaInvalid:{required:!0,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"string"},description:""},locale:{required:!1,tsType:{name:"union",raw:"'nb' | 'nn' | 'en'",elements:[{name:"literal",value:"'nb'"},{name:"literal",value:"'nn'"},{name:"literal",value:"'en'"}]},description:"",defaultValue:{value:"'nb'",computed:!1}}}};const A=n.forwardRef(({value:s,locale:e,onClick:t},a)=>{const l=D(s)?`${c[e].CHANGE_DATE}, ${c[e].CHOSEN_DATE} ${s}`:c[e].CHOOSE_DATE;return n.createElement("button",{"data-testid":"datepicker-open",ref:a,onClick:t,className:"ffe-datepicker__button","aria-label":l,type:"button"},n.createElement(y,{ariaLabel:c[e].CALENDAR_LABEL,fileUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik0yMTIuMzA5LTEwMC4wMDFxLTMwLjMwOCAwLTUxLjMwOC0yMXQtMjEtNTEuMzA4di01MzUuMzgycTAtMzAuMzA4IDIxLTUxLjMwOHQ1MS4zMDgtMjFoNTUuMzg1di01My44NDdxMC0xMy4xNTMgOC44MDgtMjEuOTYxIDguODA3LTguODA3IDIxLjk2MS04LjgwNyAxMy4xNTMgMCAyMS45NjEgOC44MDcgOC44MDcgOC44MDggOC44MDcgMjEuOTYxdjUzLjg0N2gzMDMuMDc2di01NC42MTZxMC0xMi43NjkgOC42MTUtMjEuMzg0dDIxLjM4NC04LjYxNXExMi43NjkgMCAyMS4zODQgOC42MTUgOC42MTYgOC42MTUgOC42MTYgMjEuMzg0djU0LjYxNmg1NS4zODVxMzAuMzA4IDAgNTEuMzA4IDIxdDIxIDUxLjMwOHY1MzUuMzgycTAgMzAuMzA4LTIxIDUxLjMwOHQtNTEuMzA4IDIxSDIxMi4zMDlabTAtNTkuOTk5aDUzNS4zODJxNC42MTYgMCA4LjQ2My0zLjg0NiAzLjg0Ni0zLjg0NyAzLjg0Ni04LjQ2M3YtMzc1LjM4MkgyMDB2Mzc1LjM4MnEwIDQuNjE2IDMuODQ2IDguNDYzIDMuODQ3IDMuODQ2IDguNDYzIDMuODQ2Wk0yMDAtNjA3LjY5aDU2MHYtMTAwLjAwMXEwLTQuNjE2LTMuODQ2LTguNDYzLTMuODQ3LTMuODQ2LTguNDYzLTMuODQ2SDIxMi4zMDlxLTQuNjE2IDAtOC40NjMgMy44NDYtMy44NDYgMy44NDctMy44NDYgOC40NjN2MTAwLjAwMVptMCAwVi03MjB2MTEyLjMxWm0yODAgMjEwLjc2N3EtMTQuNjkyIDAtMjUuMDM4LTEwLjM0NnQtMTAuMzQ2LTI1LjAzOHEwLTE0LjY5MiAxMC4zNDYtMjUuMDM4VDQ4MC00NjcuNjkxcTE0LjY5MiAwIDI1LjAzOCAxMC4zNDZ0MTAuMzQ2IDI1LjAzOHEwIDE0LjY5Mi0xMC4zNDYgMjUuMDM4VDQ4MC0zOTYuOTIzWm0tMTYwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOFQzMjAtNDY3LjY5MXExNC42OTIgMCAyNS4wMzggMTAuMzQ2dDEwLjM0NiAyNS4wMzhxMCAxNC42OTItMTAuMzQ2IDI1LjAzOFQzMjAtMzk2LjkyM1ptMzIwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOFQ2NDAtNDY3LjY5MXExNC42OTIgMCAyNS4wMzggMTAuMzQ2dDEwLjM0NiAyNS4wMzhxMCAxNC42OTItMTAuMzQ2IDI1LjAzOFQ2NDAtMzk2LjkyM1pNNDgwLTI0MHEtMTQuNjkyIDAtMjUuMDM4LTEwLjM0NnQtMTAuMzQ2LTI1LjAzOHEwLTE0LjY5MiAxMC4zNDYtMjUuMDM4IDEwLjM0Ni0xMC4zNDcgMjUuMDM4LTEwLjM0N3QyNS4wMzggMTAuMzQ3cTEwLjM0NiAxMC4zNDYgMTAuMzQ2IDI1LjAzOHQtMTAuMzQ2IDI1LjAzOFE0OTQuNjkyLTI0MCA0ODAtMjQwWm0tMTYwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOCAxMC4zNDYtMTAuMzQ3IDI1LjAzOC0xMC4zNDd0MjUuMDM4IDEwLjM0N3ExMC4zNDYgMTAuMzQ2IDEwLjM0NiAyNS4wMzh0LTEwLjM0NiAyNS4wMzhRMzM0LjY5Mi0yNDAgMzIwLTI0MFptMzIwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOCAxMC4zNDYtMTAuMzQ3IDI1LjAzOC0xMC4zNDd0MjUuMDM4IDEwLjM0N3ExMC4zNDYgMTAuMzQ2IDEwLjM0NiAyNS4wMzh0LTEwLjM0NiAyNS4wMzhRNjU0LjY5Mi0yNDAgNjQwLTI0MFoiLz48L3N2Zz4=",size:"md",className:"ffe-datepicker__icon"}))});A.__docgenInfo={description:"",methods:[],displayName:"Button",props:{value:{required:!0,tsType:{name:"string"},description:""},locale:{required:!0,tsType:{name:"union",raw:"'nb' | 'nn' | 'en'",elements:[{name:"literal",value:"'nb'"},{name:"literal",value:"'nn'"},{name:"literal",value:"'en'"}]},description:""},onClick:{required:!0,tsType:{name:"ReactMouseEventHandler",raw:"React.MouseEventHandler<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:""}}};class h extends g.Component{constructor(e){var t;super(e),this.locale=this.props.locale??"nb",this.buttonRef=n.createRef(),this.dateInputRef=((t=this.props.inputProps)==null?void 0:t.ref)??n.createRef(),this.debounceCalendar=E(a=>{a!==this.state.lastValidDate&&D(a)&&this.setState({calendarActiveDate:a,lastValidDate:a})},250),this.state={displayDatePicker:!1,minDate:e.minDate,maxDate:e.maxDate,lastValidDate:"",calendarActiveDate:D(e.value)?e.value:""},this.datepickerId=z(),this.openCalendar=this.openCalendar.bind(this),this.closeCalendar=this.closeCalendar.bind(this),this.closeCalendarSetInputFocus=this.closeCalendarSetInputFocus.bind(this),this.calendarButtonClickHandler=this.calendarButtonClickHandler.bind(this),this.addFlagOnClickEventClickHandler=this.addFlagOnClickEventClickHandler.bind(this),this.globalClickHandler=this.globalClickHandler.bind(this),this.escKeyHandler=this.escKeyHandler.bind(this),this.datePickedHandler=this.datePickedHandler.bind(this),this.onInputKeydown=this.onInputKeydown.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}componentWillUnmount(){this.removeGlobalEventListeners(),this.debounceCalendar.cancel()}componentDidUpdate(e,t){const a=e.value!==this.props.value&&t.displayDatePicker&&!this.state.displayDatePicker;(this.props.minDate&&this.props.minDate!==this.state.minDate||this.props.maxDate&&this.props.maxDate!==this.state.maxDate)&&this.setState({minDate:this.props.minDate,maxDate:this.props.maxDate},this.validateDateIntervals),a&&this.validateDateIntervals(),this.debounceCalendar(this.props.value)}validateDateIntervals(){this.setState((e,t)=>{let a={};const{onChange:l,value:i}=t;return L(i,r=>{a={ariaInvalid:!1};const o=e.maxDate?L(e.maxDate):null;o!=null&&o.isBefore(r)&&j(i)&&r.adjust({period:"Y",offset:-100});const d=r.format();d!==i&&l(d),a={...a,lastValidDate:d}}),a})}onInputBlur(e){var t,a;(a=(t=this.props.inputProps)==null?void 0:t.onBlur)==null||a.call(t,e),this.validateDateIntervals()}onInputKeydown(e){var t,a;(a=(t=this.props.inputProps)==null?void 0:t.onKeyDown)==null||a.call(t,e),e.key==="Enter"&&(e.preventDefault(),this.validateDateIntervals())}escKeyHandler(e){e.key==="Escape"&&this.closeCalendarSetInputFocus()}globalClickHandler(e){this.state.displayDatePicker&&e.__datepickerID!==this.datepickerId&&this.closeCalendar()}calendarButtonClickHandler(){this.validateDateIntervals(),this.state.displayDatePicker?this.closeCalendar():this.openCalendar()}addFlagOnClickEventClickHandler(e){e.nativeEvent.__datepickerID=this.datepickerId}datePickedHandler(e){this.props.onChange(e),this.removeGlobalEventListeners(),this.setState({displayDatePicker:!1,calendarActiveDate:e},()=>{var t;return(t=this.buttonRef.current)==null?void 0:t.focus()})}openCalendar(){this.setState({displayDatePicker:!0}),this.removeGlobalEventListeners(),this.addGlobalEventListeners()}closeCalendar(){this.removeGlobalEventListeners(),this.setState({displayDatePicker:!1}),this.validateDateIntervals()}closeCalendarSetInputFocus(){this.removeGlobalEventListeners(),this.setState({displayDatePicker:!1},()=>{var e;return(e=this.buttonRef.current)==null?void 0:e.focus()}),this.validateDateIntervals()}addGlobalEventListeners(){window.addEventListener("click",this.globalClickHandler),window.addEventListener("keyup",this.escKeyHandler)}removeGlobalEventListeners(){window.removeEventListener("click",this.globalClickHandler),window.removeEventListener("keyup",this.escKeyHandler)}ariaInvalid(){const e=this.props["aria-invalid"]||this.props.ariaInvalid;return[null,void 0].every(t=>t!==e)?String(e):String(this.state.ariaInvalid)}render(){const{inputProps:e={},onChange:t,value:a,fullWidth:l}=this.props,{minDate:i,maxDate:r}=this.state;this.state.ariaInvalid&&!e["aria-describedby"]&&(e["aria-describedby"]=`date-input-validation-${this.datepickerId}`);const o=m("ffe-calendar ffe-calendar--datepicker",{"ffe-calendar--datepicker--above":this.props.calendarAbove}),d=m("ffe-datepicker",{"ffe-datepicker--full-width":l});return n.createElement("div",null,n.createElement("div",{className:d,"data-testid":"date-picker",onClick:this.addFlagOnClickEventClickHandler,tabIndex:-1},n.createElement("div",{className:"ffe-datepicker--wrapper"},n.createElement(N,{id:this.props.id,...this.props.inputProps,ariaInvalid:this.ariaInvalid(),onBlur:this.onInputBlur,onChange:M=>{var p,I;(I=(p=this.props.inputProps)==null?void 0:p.onChange)==null||I.call(p,M),t(M.target.value)},onKeyDown:this.onInputKeydown,ref:this.dateInputRef,value:a,locale:this.locale}),n.createElement(A,{onClick:this.calendarButtonClickHandler,value:a,locale:this.locale,ref:this.buttonRef})),this.state.displayDatePicker&&n.createElement(f,{calendarClassName:o,escKeyHandler:M=>{M.key==="Escape"&&this.closeCalendarSetInputFocus()},locale:this.locale,maxDate:r,minDate:i,onDatePicked:this.datePickedHandler,selectedDate:this.state.calendarActiveDate,focusOnMount:!0})))}}h.__docgenInfo={description:"",methods:[{name:"validateDateIntervals",docblock:null,modifiers:[],params:[],returns:null},{name:"onInputBlur",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}],alias:"React.FocusEvent"}}],returns:null},{name:"onInputKeydown",docblock:null,modifiers:[],params:[{name:"evt",optional:!1,type:{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}],alias:"React.KeyboardEvent"}}],returns:null},{name:"escKeyHandler",docblock:null,modifiers:[],params:[{name:"evt",optional:!1,type:{name:"KeyboardEvent",alias:"KeyboardEvent"}}],returns:null},{name:"globalClickHandler",docblock:null,modifiers:[],params:[{name:"evt",optional:!1,type:{name:"MouseEvent",alias:"MouseEvent"}}],returns:null},{name:"calendarButtonClickHandler",docblock:null,modifiers:[],params:[],returns:null},{name:"addFlagOnClickEventClickHandler",docblock:`Adds a flag on the click event so that the globalClickHandler()
can determine whether or not the ID matches. Makes it so that only one datepicker can be open at the same time`,modifiers:[],params:[{name:"evt",optional:!1,type:{name:"ReactMouseEvent",raw:"React.MouseEvent",alias:"React.MouseEvent"}}],returns:null,description:`Adds a flag on the click event so that the globalClickHandler()
can determine whether or not the ID matches. Makes it so that only one datepicker can be open at the same time`},{name:"datePickedHandler",docblock:null,modifiers:[],params:[{name:"date",optional:!1,type:{name:"string"}}],returns:null},{name:"openCalendar",docblock:null,modifiers:[],params:[],returns:null},{name:"closeCalendar",docblock:null,modifiers:[],params:[],returns:null},{name:"closeCalendarSetInputFocus",docblock:null,modifiers:[],params:[],returns:null},{name:"addGlobalEventListeners",docblock:null,modifiers:[],params:[],returns:null},{name:"removeGlobalEventListeners",docblock:null,modifiers:[],params:[],returns:null},{name:"ariaInvalid",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Datepicker",props:{"aria-invalid":{required:!1,tsType:{name:"ReactComponentProps['aria-invalid']",raw:"React.ComponentProps<'input'>['aria-invalid']"},description:""},ariaInvalid:{required:!1,tsType:{name:"union",raw:"string | boolean",elements:[{name:"string"},{name:"boolean"}]},description:""},calendarAbove:{required:!1,tsType:{name:"boolean"},description:""},id:{required:!1,tsType:{name:"string"},description:""},inputProps:{required:!1,tsType:{name:"Omit",elements:[{name:"ReactComponentPropsWithRef",raw:"React.ComponentPropsWithRef<'input'>",elements:[{name:"literal",value:"'input'"}]},{name:"union",raw:"'aria-invalid' | 'value' | 'id'",elements:[{name:"literal",value:"'aria-invalid'"},{name:"literal",value:"'value'"},{name:"literal",value:"'id'"}]}],raw:`Omit<
    React.ComponentPropsWithRef<'input'>,
    'aria-invalid' | 'value' | 'id'
>`},description:""},locale:{required:!1,tsType:{name:"union",raw:"'nb' | 'nn' | 'en'",elements:[{name:"literal",value:"'nb'"},{name:"literal",value:"'nn'"},{name:"literal",value:"'en'"}]},description:""},maxDate:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},minDate:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: string) => void",signature:{arguments:[{type:{name:"string"},name:"date"}],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"string"},description:""},fullWidth:{required:!1,tsType:{name:"boolean"},description:""}}};const w={title:"components/datepicker/Datepicker",component:h},u={args:{locale:"nb",maxDate:"31.12.2016",minDate:"01.01.2016"},render:function({value:e,onChange:t,...a}){const[l,i]=g.useState("01.01.2016");return n.createElement(k,{label:"Dato"},n.createElement(h,{...a,value:e??l,onChange:t??i}))}};var C,v,T;u.parameters={...u.parameters,docs:{...(C=u.parameters)==null?void 0:C.docs,source:{originalSource:`{
  args: {
    locale: 'nb',
    maxDate: '31.12.2016',
    minDate: '01.01.2016'
  },
  render: function Render({
    value,
    onChange,
    ...args
  }) {
    const [date, setDate] = useState('01.01.2016');
    return <InputGroup label="Dato">
                <Datepicker {...args} value={value ?? date} onChange={onChange ?? setDate} />
            </InputGroup>;
  }
}`,...(T=(v=u.parameters)==null?void 0:v.docs)==null?void 0:T.source}}};const b=["Standard"],P=Object.freeze(Object.defineProperty({__proto__:null,Standard:u,__namedExportsOrder:b,default:w},Symbol.toStringTag,{value:"Module"}));export{P as D,u as S};
